<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Technology | Xhuma Communications</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <!-- Bootstrap CSS-->
  <link rel="stylesheet" href="../vendor/bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome CSS-->
  <link rel="stylesheet" href="../vendor/font-awesome/css/font-awesome.min.css">
  <!-- Custom Font Icons CSS-->
  <link rel="stylesheet" href="../css/landy-iconfont.css">
  <!-- Google fonts - Open Sans-->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800">
  <!-- owl carousel-->
  <link rel="stylesheet" href="../vendor/owl.carousel/assets/owl.carousel.css">
  <link rel="stylesheet" href="../vendor/owl.carousel/assets/owl.theme.default.css">
  <!-- theme stylesheet-->
  <link rel="stylesheet" href="../css/style.default.css" id="theme-stylesheet">
  <!-- Custom stylesheet - for your changes-->
  <link rel="stylesheet" href="../css/custom.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/default.min.css">

  <!-- Favicon-->
  <link rel="shortcut icon" href="../favicon.png">
  <!-- Tweaks for older IEs-->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>

<body>
  <!-- navbar-->
  <header class="header">
    <nav class="navbar navbar-expand-lg fixed-top"><a href="../index.html" class="navbar-brand">Xhuma</a>
      <button type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
        class="navbar-toggler navbar-toggler-right"><span></span><span></span><span></span></button>
      <div id="navbarSupportedContent" class="collapse navbar-collapse">
        <ul class="navbar-nav ml-auto align-items-start align-items-lg-center">
          <li class="nav-item"><a href="../index.html" class="nav-link">Home</a></li>
          <li class="nav-item"><a href="../about/" class="nav-link link-scroll">About</a></li>
          <li class="nav-item"><a href="../technology/" class="nav-link link-scroll active">Technology</a></li>
          <li class="nav-item"><a href="../pay/" class="nav-link link-scroll"><strong>Xhuma Pay</strong></a></li>
          <li class="nav-item"><a href="../contact/" class="nav-link">Contact</a></li>
        </ul>
      </div>
    </nav>
  </header>
  <section class="extra-features">
    <div class="container">
      <div class="row block">
        <div class="col-lg-9">
          <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="./">Home</a></li>
            <li class="breadcrumb-item">Technology</li>
          </ul>
          <h1>Under the Hood: Technology behind Xhuma</h1>
          <p class="lead">Frameworks, SDKs and API's
          </p>
          <p>
            In order to create a suitable peer to peer application, we needed to consider which technologies were
            needed, as well as the best frameworks and libraries to easily build a scalable, secure network.
          </p>
          <p>

          </p>
        </div>
      </div>

      <h3>What is mesh networking?</h3>
      <div class="row">
        <div class="col-lg-6 col-sm-12">
          <p>
            There are three types of fundemental networks used in today's connected systems <i>(see Figure 1a)</i>. Both
            Centralised and decentralised networks have a control heirarchy with usually one device controlling the
            processes carried out by the others. However, this means that there needs to be a connection to the central
            control, and the network cannot function without it.
          </p>
          <p>
            Xhuma uses a <strong>mesh networking</strong> principle to ensure that there is no central control of
            anybody's data, nor a need to connect to a central server to access the network*.
          </p>
          <p>

          </p>
          <p style="font-size: 12px;">
            <i>Currently, Xhuma requires authorisation through a central server</i>
          </p>
        </div>
      </div>
      <h3>Native vs Progressive Web Apps</h3>
      <div class="row">
        <div class="col-lg-6 col-sm-12">
          <p>
            In many Progressive Web Apps (PWA), the app functions by sending and receiving requests between a server
            running something like Node.js or web sockets.

          </p>
          <p>
            One of Xhuma’s core principles is that it’s decentralised. And while it takes advantage of offline peer to
            peer technologies such as WiFi and Bluetooth, it needs to be able to operate online as well.

          </p>
          <p>
            It is also necessary for Xhuma to function on a large range of devices. Because of this, native apps are not
            so suitable. It would be more beneficial to create a responsive PWA which can be run on many devices.
          </p>
          <p>
            However, the technologies which exist to facilitate peer to peer communication work through the internet,
            and as we can see from the extract below, we cannot access the WiFi or Bluetooth peripherals of the device
            from the browser’s sandbox.
          </p>
          <p>
            <strong>Abilities of PWA on iOS</strong>
            <br>
            <ul>
              <li>Geolocation</li>
              <li>Sensors (Magnetometer, Accelerometer, Gyroscope)</li>
              <li>Camera</li>
              <li>Audio output</li>
              <li>Speech Synthesis (with headsets connected only)</li>
              <li>Apple Pay</li>
              <li>WebAssembly, WebRTC, WebGL as well as many other experimental features under a flag.</li>
            </ul>
          </p>
          <p>
            The solution to this is to run the PWA from within a native container. On iOS, for example, this allows us
            to make use of the Multipeer Connectivity framework which enables instant exposure to nearby peers and
            facilitates connections as well as the sending and receiving of data.
            In line with the community based values of Xhuma, the PWA can be offered freely with an easy to use API for
            container-app communications. This will enable rapid penetration across a wide range of devices.
          </p>
          <p><strong>NOTE: For the purpose of this submission, I have written a native application to facilitate rapid
              development.</strong></p>
        </div>

        <div class="col-lg-6 col-sm-12">
          <p>
            <img class="img-fluid btn-shadow" src="../img/pwa-vs-native-app.jpg">
          </p>
        </div>
      </div>
      <div class="spacer"></div>
      <h3>Ideal App</h3>
      <div class="row">
        <div class="col-lg-6 col-sm-12">
          <p class="lead">Overview</p>
          <p>
            In order for Xhuma to be effective, it needs to be able to be the following three things:
          </p>
          <p class="lead">Native Container</p>
          <p>Unfortunately, for the purposes of this challenge, I did not have the time to sufficiently research or
            implement peer-based authentication.</p>
          <p>As such, the authentication screens in the app do not actually implement sign up or log in. Instead, the
            app uses the user-supplied username to identify itself to peers on the network.</p>
        </div>
        <div class="col-lg-6 col-sm-12">
          <p>
            <img class="img-fluid" src="../img/code.png">
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 col-sm-12">
          <p class="lead">Open Source Progressive Web App</p>
          <p>Xhuma needs to be accessible to as many people as possible. In light of this, a PWA developed in React Native would be ideal. </p>
          <p>
            The PWA can then be run from the native container mentioned above.
          </p>
        </div>
        <div class="col-md-6 col-sm-12">
          <p class="lead">Easy to Use API</p>
          <p>
            Eventually, the goal would be to develop an easy to use API for the web app, meaning that developers could
            work on implementing a native container for a variety of platforms very easily. 
          </p>
        </div>
      </div>
      <div class="row">
          <div class="col-lg-6 col-sm-12">
            <h3 class="lead">End to End Encryption</h3>
            <p>
              It is imperative that any data sent or received using Xhuma is encrypted end-to-end, with the added benefit of no centralised records or keys that can be hacked.
            </p>
          </div>
        </div>
      <div class="spacer"></div>
      <h3>Code</h3>
      <div class="row">
        <div class="col-lg-6 col-sm-12">
          <p>
            As my version of the Xhuma app is a prototype, I began working in the language and platform I felt most
            comfortable in - namely Swift and iOS.
          </p>
          <p>
            iOS comes with a built-in framework called Multipeer Connectivity which rapidly facilitates the advertising,
            browsing and connection to local devices running the same instance of your service.
          </p>
        </div>
        <div class="col-lg-6">

        </div>
      </div>
      <div class="spacer"></div>

      <div class="row">
        <div class="col-lg-6">
          <p class="lead">Authentication</p>
          <p>Unfortunately, for the purposes of this challenge, I did not have the time to sufficiently research or
            implement peer-based authentication.</p>
          <p>As such, the authentication screens in the app do not actually implement sign up or log in. Instead, the
            app uses the user-supplied username to identify itself to peers on the network.</p>
        </div>
        <div class="col-lg-6 col-sm-12">
        </div>
      </div>
      <div class="spacer"></div>
      <p class="lead">MultipeerConnectivity Framework</p>
      <div class="row">
          <div class="col-lg-6">
              <p>Starting with iOS 7.0, Apple Inc. introduced an SDK for easily facilitating multipeer connections using
                WiFi and Bluetooth as needed.</p>
              <p>
                MultiPeerConnectivity objects must have the following properties
                <pre>
                    <code class="hljs swift">
                        peerID: MCCPeerID
                        session: MCSession
                        browser: MCNearbyServiceBrowser
                        advertiser: MCNearbyServiceAdvertiser
      
                    </code>
                  </pre>
              </p>
          </div>
          <div class="col-lg-6 col-sm-12">
            <p>
              The process works as follows: First, the device advertises itself and browsers for users using the same
              service type (Unique String Identifier). Once a peer has been found, the app programatically invites any
              users nearby. Only one nearby user is needed to use the Xhuma Network. Once a connection has been
              established, the app segues to the recent chat screen.
            </p>
          </div>
        </div>

      <div class="spacer"></div>
      <div class="row">
        <div class="col-lg-12">
          <p class="lead">MultiPeerConnection Custom Class
            <pre>
            <code>
                //
                //  MultipeerConnection.swift
                //  self-build
                //
                //  Created by James Hilton-Barber on 2019/07/30.
                //  Copyright © 2019 James Hilton-Barber. All rights reserved.
                //
                
                import UIKit
                import MultipeerConnectivity
                
                class MultipeerConnection: NSObject, MCNearbyServiceBrowserDelegate, MCSessionDelegate, MCNearbyServiceAdvertiserDelegate {
                    func advertiser(_ advertiser: MCNearbyServiceAdvertiser, didReceiveInvitationFromPeer peerID: MCPeerID, withContext context: Data?, invitationHandler: @escaping (Bool, MCSession?) -> Void) {
                        invitationHandler(true, mpcSession)
                    }
                    
                    
                    var myPeerId: MCPeerID!
                    var mpcSession: MCSession!
                    var mpcBrowser: MCNearbyServiceBrowser!
                    var mpcAdvertiser: MCNearbyServiceAdvertiser!
                    var sessionActive: Bool!
                    var status = ""
                    
                    var peerConnections: Array<MCPeerID>!
                    
                    override init(){
                        super.init()
                        
                        print("Began init()")
                        
                        // create Peer ID
                        myPeerId = MCPeerID(displayName: UIDevice.current.name)
                        // Init Session
                        sessionActive = false
                        mpcSession = MCSession(peer: myPeerId)
                        mpcSession.delegate = self
                        
                        mpcAdvertiser = MCNearbyServiceAdvertiser(peer: myPeerId, discoveryInfo: nil, serviceType: "xhuma-chat")
                        mpcAdvertiser.delegate = self
                
                        mpcBrowser = MCNearbyServiceBrowser(peer: myPeerId, serviceType: "xhuma-chat")
                        mpcBrowser.delegate = self
                        mpcBrowser.startBrowsingForPeers()
                        mpcAdvertiser.startAdvertisingPeer()
                        
                    }
                    
                    
                    // Advertiser Methods
                    
                    func session(_ session: MCSession, peer peerID: MCPeerID, didChange state: MCSessionState) {
                        switch state {
                        case .connected:
                            print("Conntected to peer: \(peerID.displayName)")
                            if mpcSession.connectedPeers.count > 1 {
                                sessionActive = true
                            }
                        case .connecting:
                            print("Connecting to peer: \(peerID.displayName)")
                        case .notConnected:
                            print("Disconnected from Peer: \(peerID.displayName)")
                            if mpcSession.connectedPeers.count < 1 {
                                sessionActive = false
                            }
                        default:
                            print("Error")
                        }
                    }
                    
                    func session(_ session: MCSession, didReceive data: Data, fromPeer peerID: MCPeerID) {
                        print("received: \(data) from peer \(peerID.displayName)")
                    }
                    
                    func session(_ session: MCSession, didReceive stream: InputStream, withName streamName: String, fromPeer peerID: MCPeerID) {
                        print("received: \(stream) from peer \(peerID.displayName)")
                    }
                    
                    func session(_ session: MCSession, didStartReceivingResourceWithName resourceName: String, fromPeer peerID: MCPeerID, with progress: Progress) {
                        print("receiving: \(resourceName) from peer \(peerID.displayName)")
                    }
                    
                    func session(_ session: MCSession, didFinishReceivingResourceWithName resourceName: String, fromPeer peerID: MCPeerID, at localURL: URL?, withError error: Error?) {
                        print("finished: \(resourceName) from peer \(peerID.displayName)")
                    }
                    
                    func browser(_ browser: MCNearbyServiceBrowser, foundPeer peerID: MCPeerID, withDiscoveryInfo info: [String : String]?) {
                        if info?["String"] == nil {
                            print("Found peer \(peerID.displayName)")
                            mpcBrowser.invitePeer(peerID, to: mpcSession, withContext: nil, timeout: 20)
                        }
                    }
                    
                    func browser(_ browser: MCNearbyServiceBrowser, lostPeer peerID: MCPeerID) {
                        print("Lost peer: \(peerID.displayName)")
                    }
                
                }
                
            </code>
          </pre>

        </div>
      </div>
      <div class="spacer"></div>
      <div class="row">
        <div class="col-lg-12">
          <p class="lead">Laying out the views and mapping interaction</p>
          <img class="img-fluid" src="../img/storyboard-layout.png">

        </div>
      </div>
      <div class="spacer"></div>
      <br>
      <br>
      <h3>Read More</h3>
      <div class="grid row">

        <div class="item col-lg-4 col-md-6">
          <img class="img-fluid" src="../img/internet.jpg" style="margin-bottom: 20px;">
          <br>
          <h3 class="h5">Xhuma: Context and History</h3>
          <p>Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour.</p>
        </div>


        <div class="item col-lg-4 col-md-6">
          <img class="img-fluid" src="../img/scrn.png" style="margin-bottom: 20px;">
          <br>
          <h3 class="h5">Under the Hood: How Xhuma Works</h3>
          <p>Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour.</p>
        </div>
        <div class="item col-lg-4 col-md-6">
          <img class="img-fluid" src="../img/shop.jpg" style="margin-bottom: 20px;">
          <br>
          <h3 class="h5">Expansion Campaign 2019</h3>
          <p>Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour.</p>
        </div>
      </div>
    </div>
  </section>
  <footer class="main-footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-6">
          <a href="#" class="brand">Xhuma Communications, Inc.</a>
        </div>
        <div class="col-lg-3 col-md-6">
          <h5>Contact</h5>
          <ul class="contact-info list-unstyled">
            <li><a href="mailto:sales@landy.com">hey@xhuma.com</a></li>
            <li><a href="tel:123456789">+00 123 456 789</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6">
          <h5>About</h5>
          <ul class="links list-unstyled">
            <li> <a href="/about/">History and Context</a></li>
            <li> <a href="technology/">Technology</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6">
          <h5>Coming Soon</h5>
          <ul class="links list-unstyled">
            <li> <a href="pay/">Xhuma Pay</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="copyrights">
      <div class="container">
        <div class="row">
          <div class="col-md-7">
            <p>&copy; 2019 Xhuma Communications, Inc. All rights reserved. </p>
          </div>
          <div class="col-md-5 text-right">
            <p>Template By <a href="https://bootstrapious.com/" class="external">Bootstrapious</a> </p>
            <!-- Please do not remove the backlink to Bootstrapious unless you support us at http://bootstrapious.com/donate. It is part of the license conditions. Thanks for understanding :) -->
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!-- Javascript files-->
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"> </script>
  <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="../vendor/jquery.cookie/jquery.cookie.js"> </script>
  <script src="../vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="../js/front.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/highlight.min.js"></script>
  <!-- Google Analytics: change UA-XXXXX-X to be your site's ID.-->
  <!---->
  <script>
    (function (b, o, i, l, e, r) {
      b.GoogleAnalyticsObject = l; b[l] || (b[l] =
        function () { (b[l].q = b[l].q || []).push(arguments) }); b[l].l = +new Date;
      e = o.createElement(i); r = o.getElementsByTagName(i)[0];
      e.src = '//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e, r)
    }(window, document, 'script', 'ga'));
    ga('create', 'UA-XXXXX-X'); ga('send', 'pageview');
  </script>


  <script>
    hljs.initHighlightingOnLoad();
  </script>
</body>

</html>